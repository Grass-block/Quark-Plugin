# 配置文件
文: GrassBlock2022

-----

配置文件提供starlight插件中基础数据的定义，也允许对插件逻辑流的精细控制和对显示与交互的修改。
配置文件大体上分为`语言(lang)`和`配置(config)`, 
而其中配置按照作用域与类型又可以细分为`数值(values)`, `凭据(secrets)`, 以及独立或成组的额外配置项。
在本文档中，所有未明确告知类型的配置均为`数值`或`语言`。所有额外配置项均会给出相应的位置。

## 数值文件(value)

所有数值文件定义且包含了插件运行的全部数值数据，不可增加，不可删改。
全部数值文件均存放在 `plugins/starlight/config/values` 下。

通常可以写入的数值文件是空的，因为您需要寻找`<同名>.template.yml`的文件进行修改。

一般的，数值文件的结构如下:
```yaml
config: #根节点，必须是 'config'
  module: #命名空间，在子包配置中它对应一个模块/节点
    default_status: true #kv值
  http_server:
    host: 127.0.0.1
    port: 8125
    backlog: 10
```

数值文件可以通过核心命令进行管理。

- ```/config reload [id]``` 重载一个
- ```/config restore [id]``` 重置一个(恢复到初始状态)
- ```/config reload_all ``` 重载全部
- ```/config restore_all ``` 重置全部(恢复到初始状态)

## 凭据配置(secrets)

凭据配置通常独立存放，包含了可能涉及您服务器更高权限或者不适合分享出去的配置项，如插件件虚拟专用网络设置等。
请不要轻易将凭据配置分享给他人。

凭据配置通常只有一级结构，以plugin-vpn为例:

```yaml
plugin-vpn:
  enabled: false                         
  address: "127.0.0.1"                   
  port: 25830                           
  exchange: false                       
  identifier: plugin-pvn-example-server  
  secret: "PLUGIN_VPN_DEFAULT_SECRET"    
```

凭据配置文件通常不带有这些注释，因此请仔细阅读文档。
凭据配置无法通过核心指令进行管理，因为其通常作用于核心服务组件上，若要刷新其数值，请尝试重载。

## 语言文件(lang)

语言文件的格式和逻辑与数值配置基本一致，但其中包含的是不同语言下的逻辑信息。
当前插件只会尝试加载简体中文（中国大陆）与英语。若要添加第三方语言，可尝试制作第三方资源包。

> 欢迎随时提交你的翻译文件，我们将不胜感激。

由于语言文件格式与数值文件完全一致，此处不再赘述。

同样的，语言文件也可以通过核心命令管理。

- ```/language reload [id]``` 重载一个
- ```/language restore [id]``` 重置一个(恢复到初始状态)
- ```/language reload_all ``` 重载全部
- ```/language restore_all ``` 重置全部(恢复到初始状态)

## 额外配置项

额外配置项由各个组件独立定义并管理，其注释请阅读对应文档，额外配置项通常遵循一些规律。

额外配置项的独立文件会堆在config目录下面，可以直接编辑并且保存它们，配置文件更新时会自动添加不存在的数值。

额外配置项的成组文件通常为文件夹形式置于config目录下面。
所有配置组中均包含一个example.yml，其格式时配置组中所有文件的模板。模板文件会自动覆盖，故**不可编辑**。
配置组中所有文件都会为需求方添加额外的配置项，因此如果要添加平行内容直接新建一个文件就好，加载的时候会自动纳入全部文件。

